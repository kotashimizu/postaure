# Postaure ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚¬ã‚¤ãƒ‰

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€Postaure ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ“‹ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆå‰ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### âœ… æŠ€è¡“è¦ä»¶
- [ ] Node.js 18.0.0+ ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿
- [ ] TypeScript ã‚¨ãƒ©ãƒ¼ãŒã™ã¹ã¦è§£æ±ºæ¸ˆã¿
- [ ] ESLint ã‚¨ãƒ©ãƒ¼ãŒã™ã¹ã¦è§£æ±ºæ¸ˆã¿
- [ ] ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰ãŒæ­£å¸¸ã«å®Œäº†
- [ ] äº’æ›æ€§ãƒ†ã‚¹ãƒˆãŒã™ã¹ã¦æˆåŠŸ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆãŒåŸºæº–ã‚’æº€ãŸã—ã¦ã„ã‚‹

### âœ… æ©Ÿèƒ½è¦ä»¶
- [ ] MediaPipe å§¿å‹¢æ¤œå‡ºãŒæ­£å¸¸å‹•ä½œ
- [ ] Kendall åˆ†æãŒæ­£ç¢ºã«å®Ÿè¡Œ
- [ ] ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆï¼ˆPNG/PDF/JSONï¼‰ãŒæ­£å¸¸å‹•ä½œ
- [ ] ã‚«ãƒ¡ãƒ©æ©Ÿèƒ½ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒæ­£å¸¸å‹•ä½œ
- [ ] ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½ãŒæ­£å¸¸å‹•ä½œ
- [ ] PWA ã¨ã—ã¦æ­£ã—ãå‹•ä½œ

### âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶
- [ ] ç’°å¢ƒå¤‰æ•°ãŒé©åˆ‡ã«è¨­å®š
- [ ] API ã‚­ãƒ¼ãŒãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ãªã„
- [ ] HTTPS ã§ã®é…ä¿¡ãŒè¨­å®šæ¸ˆã¿
- [ ] Content Security Policy (CSP) ãŒè¨­å®šæ¸ˆã¿
- [ ] ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ãŒæ•´å‚™æ¸ˆã¿

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæ‰‹é †

### 1. ãƒ“ãƒ«ãƒ‰ã®æº–å‚™
```bash
# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm ci

# TypeScript ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯
npm run build

# æœ¬ç•ªãƒ“ãƒ«ãƒ‰ã®ç”Ÿæˆ
npm run build
```

### 2. é™çš„ã‚µã‚¤ãƒˆãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°

#### Vercel ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# Vercel CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm i -g vercel

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤
vercel

# æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
vercel --prod
```

#### Netlify ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# Netlify CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm i -g netlify-cli

# ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤
netlify build
netlify deploy

# æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
netlify deploy --prod
```

#### GitHub Pages ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# gh-pages ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm i -D gh-pages

# ãƒ‡ãƒ—ãƒ­ã‚¤
npm run build
npx gh-pages -d dist
```

### 3. Docker ãƒ‡ãƒ—ãƒ­ã‚¤

#### Dockerfile ã®ä½œæˆ
```dockerfile
# ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¸
FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

# æœ¬ç•ªã‚¹ãƒ†ãƒ¼ã‚¸
FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

#### nginx.conf ã®è¨­å®š
```nginx
events {
    worker_connections 1024;
}

http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;

    server {
        listen 80;
        server_name localhost;
        root /usr/share/nginx/html;
        index index.html;

        # Service Worker support
        location /sw.js {
            add_header Cache-Control "no-cache";
            add_header Service-Worker-Allowed "/";
        }

        # PWA manifest
        location /manifest.json {
            add_header Content-Type application/manifest+json;
        }

        # SPA routing
        location / {
            try_files $uri $uri/ /index.html;
        }

        # Security headers
        add_header X-Frame-Options DENY;
        add_header X-Content-Type-Options nosniff;
        add_header X-XSS-Protection "1; mode=block";
        add_header Referrer-Policy "strict-origin-when-cross-origin";
    }
}
```

#### Docker ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰
docker build -t postaure:latest .

# ã‚³ãƒ³ãƒ†ãƒŠã®å®Ÿè¡Œ
docker run -d -p 80:80 --name postaure postaure:latest
```

### 4. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

æœ¬ç•ªç’°å¢ƒã§ã¯ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼š

```bash
# å¿…é ˆè¨­å®š
NODE_ENV=production
VITE_APP_VERSION=1.0.0
VITE_APP_NAME=Postaure

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®šï¼ˆAIãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆï¼‰
VITE_OPENAI_API_KEY=your_openai_api_key
VITE_ANTHROPIC_API_KEY=your_anthropic_api_key

# åˆ†æãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
VITE_ENABLE_ANALYTICS=false
VITE_ENABLE_ERROR_REPORTING=false
```

## ğŸ”§ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. Bundle Size ã®æœ€é©åŒ–
```bash
# Bundle analyzer ã‚’ä½¿ç”¨ã—ã¦ã‚µã‚¤ã‚ºã‚’ãƒã‚§ãƒƒã‚¯
npm run build -- --analyze

# å¤§ããªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤‰æ›´
# MediaPipeã€pdf-libã€html2canvas ãªã©
```

### 2. CDN ã®è¨­å®š
é™çš„ã‚¢ã‚»ãƒƒãƒˆï¼ˆç”»åƒã€ãƒ•ã‚©ãƒ³ãƒˆã€ã‚¢ã‚¤ã‚³ãƒ³ãªã©ï¼‰ã‚’CDNã§é…ä¿¡ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ï¼š

```javascript
// vite.config.ts ã§CDNè¨­å®š
export default defineConfig({
  build: {
    rollupOptions: {
      external: ['@mediapipe/pose', '@mediapipe/camera_utils'],
      output: {
        globals: {
          '@mediapipe/pose': 'MediaPipePose',
          '@mediapipe/camera_utils': 'MediaPipeCamera'
        }
      }
    }
  }
});
```

### 3. Service Worker ã®æœ€é©åŒ–
```javascript
// ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã®èª¿æ•´
const CACHE_STRATEGY = {
  images: 'cache-first',
  api: 'network-first', 
  static: 'stale-while-revalidate'
};
```

## ğŸ” ç›£è¦–ã¨ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

### 1. ã‚¨ãƒ©ãƒ¼ç›£è¦–
```javascript
// æœ¬ç•ªç’°å¢ƒã§ã®ã‚¨ãƒ©ãƒ¼ç›£è¦–
if (import.meta.env.PROD && import.meta.env.VITE_ENABLE_ERROR_REPORTING) {
  // Sentry, LogRocket, ãªã©ã®è¨­å®š
}
```

### 2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
```javascript
// Web Vitals ã®ç›£è¦–
import { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals';

getCLS(console.log);
getFID(console.log);
getFCP(console.log);
getLCP(console.log);
getTTFB(console.log);
```

### 3. ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ†æï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```javascript
// ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã«é…æ…®ã—ãŸåˆ†æ
if (userConsent && import.meta.env.VITE_ENABLE_ANALYTICS) {
  // Google Analytics 4, Plausible, ãªã©ã®è¨­å®š
}
```

## ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

### 1. Content Security Policy
```html
<meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;
  style-src 'self' 'unsafe-inline';
  img-src 'self' data: blob:;
  media-src 'self' blob:;
  worker-src 'self';
  connect-src 'self' https://api.openai.com https://api.anthropic.com;
">
```

### 2. HTTPS ã®å¼·åˆ¶
```javascript
// HTTPS ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
if (location.protocol !== 'https:' && !location.hostname.includes('localhost')) {
  location.replace(`https:${location.href.substring(location.protocol.length)}`);
}
```

### 3. Permissions Policy
```html
<meta http-equiv="Permissions-Policy" content="
  camera=(self),
  microphone=(),
  geolocation=(),
  gyroscope=(),
  magnetometer=(),
  payment=()
">
```

## ğŸ“Š ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆå¾Œã®æ¤œè¨¼

### 1. æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
- [ ] å§¿å‹¢åˆ†æãŒæ­£å¸¸å‹•ä½œ
- [ ] ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›ãŒæ­£å¸¸å‹•ä½œ
- [ ] PWA ã¨ã—ã¦æ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½
- [ ] ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½ãŒæ­£å¸¸å‹•ä½œ
- [ ] å„ç¨®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®å‹•ä½œç¢ºèª

### 2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- [ ] Lighthouse ã‚¹ã‚³ã‚¢ 90+ (Performance)
- [ ] First Contentful Paint < 2ç§’
- [ ] Largest Contentful Paint < 4ç§’
- [ ] Time to Interactive < 5ç§’

### 3. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ
- [ ] Lighthouse ã‚¹ã‚³ã‚¢ 100 (Accessibility)
- [ ] ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ã§ã®å‹•ä½œç¢ºèª
- [ ] ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç¢ºèª

## ğŸ”„ ç¶™ç¶šçš„ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ (CI/CD)

### GitHub Actions ã®è¨­å®šä¾‹
```yaml
name: Deploy to Production

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
    
    - name: Install dependencies
      run: npm ci
    
    - name: Run tests
      run: npm test
    
    - name: Build
      run: npm run build
      env:
        VITE_APP_VERSION: ${{ github.sha }}
    
    - name: Deploy to Vercel
      uses: amondnet/vercel-action@v25
      with:
        vercel-token: ${{ secrets.VERCEL_TOKEN }}
        vercel-org-id: ${{ secrets.ORG_ID }}
        vercel-project-id: ${{ secrets.PROJECT_ID }}
        vercel-args: '--prod'
```

## ğŸ¯ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™å€¤

### æœ¬ç•ªç’°å¢ƒã§ã®ç›®æ¨™å€¤
- **Bundle Size**: < 1MB (gzipped < 300KB)
- **First Load**: < 3ç§’ (3Gæ¥ç¶š)
- **Analysis Time**: < 5ç§’ per image pair
- **Memory Usage**: < 150MB typical
- **Lighthouse Score**: 
  - Performance: 90+
  - Accessibility: 100
  - Best Practices: 90+
  - SEO: 90+

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæ™‚ã®å•é¡Œã«ã¤ã„ã¦ã¯ï¼š

1. GitHub Issues ã§ã®å ±å‘Š
2. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒ­ã‚°ã®ç¢ºèª
3. ãƒ–ãƒ©ã‚¦ã‚¶ Developer Tools ã§ã®ç¢ºèª
4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ãƒ‡ãƒ¼ã‚¿ã®åˆ†æ

---

**âš ï¸ é‡è¦**: æœ¬ç•ªç’°å¢ƒã§ã¯å¿…ãšHTTPSç’°å¢ƒã§é…ä¿¡ã—ã€é©åˆ‡ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚